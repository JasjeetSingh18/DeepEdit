{% extends "layout.html" %} {% block title %} Upload {% endblock %} {% block
main %}
<form action="/upload" method="POST" enctype="multipart/form-data">
  <div class="container glass-container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <h1 class="display-4 text-center gradient-text mb-3">
          Upload Your Photo
        </h1>
        <p class="lead text-center text-muted mb-5 text-white-50">
          Choose a photo to edit using AI-powered tools.
        </p>

        <div class="mb-4">
          <div class="file-upload-area p-5 text-center" id="fileUploadArea">
            <div class="upload-icon mb-3" id="uploadIcon">ðŸ“¸</div>
            <input
              class="form-control border-0 bg-transparent text-center"
              type="file"
              id="formFile"
              name="userPhoto"
              accept="image/*"
              required
              style="
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
              "
            />
            <div id="fileUploadText">
              <h5 class="text-muted">
                Drop your photo here or click to browse
              </h5>
              <small class="text-muted">Supports JPG, PNG, GIF files</small>
            </div>
          </div>
        </div>
        <!--Handle if the file is selected-->
        <script>
          const fileUploadArea = document.querySelector(".file-upload-area");
          const formFile = document.getElementById("formFile");
          const fileUploadText = document.querySelector("#fileUploadText");

          function handleFileSelect(files) {
            if (files.length > 0) {
              if (fileUploadText) {
                fileUploadText.style.display = "none";
              }

              const fileName = files[0].name;
              const fileInfo = document.createElement("div");
              fileInfo.className = "selected-file-info";
              fileInfo.innerHTML = `<strong>Selected:</strong> ${fileName}`;
              fileUploadArea.appendChild(fileInfo);
              document.getElementById("uploadIcon").textContent = "âœ…";
            }
          }

          if (formFile.files.length > 0) {
            handleFileSelect(formFile.files);
          }

          formFile.addEventListener("change", (e) => {
            if (e.target.files.length > 0) {
              handleFileSelect(e.target.files);
            }
          });

          fileUploadArea.addEventListener("dragover", (e) => {
            e.preventDefault();
            fileUploadArea.classList.add("hover");
          });

          fileUploadArea.addEventListener("dragleave", () => {
            fileUploadArea.classList.remove("hover");
          });

          fileUploadArea.addEventListener("drop", (e) => {
            e.preventDefault();
            fileUploadArea.classList.remove("hover");
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type.startsWith("image/")) {
              formFile.files = files;
              handleFileSelect(files);
            }
          });
        </script>

        <div class="d-grid">
          <button
            type="submit"
            class="btn btn-primary btn-lg btn-gradient rounded-pill py-3"
          >
            Edit Photo
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
{% endblock %}
